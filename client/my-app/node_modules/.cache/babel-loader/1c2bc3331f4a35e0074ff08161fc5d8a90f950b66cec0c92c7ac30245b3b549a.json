{"ast":null,"code":"import React,{useContext,useState}from'react';import{Container,Form}from\"react-bootstrap\";import Card from\"react-bootstrap/Card\";import Button from\"react-bootstrap/Button\";import Row from\"react-bootstrap/Row\";import{NavLink,useLocation,useNavigate}from\"react-router-dom\";import{LOGIN_ROUTE,REGISTRATION_ROUTE,SHOP_ROUTE}from\"../utils/consts\";import{login,registration}from\"../http/userAPI\";import{observer}from\"mobx-react-lite\";import{Context}from\"../index\";import\"../styles/Auth.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Auth=observer(()=>{const{user}=useContext(Context);const location=useLocation();const history=useNavigate();const isLogin=location.pathname===LOGIN_ROUTE;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const click=async()=>{try{let data;if(isLogin){data=await login(email,password);}else{data=await registration(email,password);}console.log(\"Данные после регистрации/входа:\",data);user.setUser(data);user.setIsAuth(true);history(SHOP_ROUTE);window.location.reload();}catch(e){var _e$response,_e$response$data;alert(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.message)||\"Ошибка авторизации\");}};return/*#__PURE__*/_jsx(Container,{className:\"auth-container\",children:/*#__PURE__*/_jsxs(Card,{className:\"auth-card\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"auth-title\",children:isLogin?'Авторизация':\"Регистрация\"}),/*#__PURE__*/_jsxs(Form,{className:\"auth-form\",children:[/*#__PURE__*/_jsx(Form.Control,{className:\"auth-input\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 email...\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(Form.Control,{className:\"auth-input\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C...\",value:password,onChange:e=>setPassword(e.target.value),type:\"password\"}),/*#__PURE__*/_jsxs(Row,{className:\"auth-buttons\",children:[isLogin?/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u041D\\u0435\\u0442 \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430? \",/*#__PURE__*/_jsx(NavLink,{className:\"auth-link\",to:REGISTRATION_ROUTE,children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u0443\\u0439\\u0441\\u044F!\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u0415\\u0441\\u0442\\u044C \\u0430\\u043A\\u043A\\u0430\\u0443\\u043D\\u0442? \",/*#__PURE__*/_jsx(NavLink,{className:\"auth-link\",to:LOGIN_ROUTE,children:\"\\u0412\\u043E\\u0439\\u0434\\u0438\\u0442\\u0435!\"})]}),/*#__PURE__*/_jsx(Button,{className:\"auth-btn\",onClick:click,children:isLogin?'Войти':'Регистрация'})]})]})]})});});export default Auth;","map":{"version":3,"names":["React","useContext","useState","Container","Form","Card","Button","Row","NavLink","useLocation","useNavigate","LOGIN_ROUTE","REGISTRATION_ROUTE","SHOP_ROUTE","login","registration","observer","Context","jsx","_jsx","jsxs","_jsxs","Auth","user","location","history","isLogin","pathname","email","setEmail","password","setPassword","click","data","console","log","setUser","setIsAuth","window","reload","e","_e$response","_e$response$data","alert","response","message","className","children","Control","placeholder","value","onChange","target","type","to","onClick"],"sources":["/home/cracker1/Desktop/store/client/my-app/src/pages/Auth.js"],"sourcesContent":["import React, {useContext, useState} from 'react';\r\nimport {Container, Form} from \"react-bootstrap\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport {NavLink, useLocation, useNavigate} from \"react-router-dom\";\r\nimport {LOGIN_ROUTE, REGISTRATION_ROUTE, SHOP_ROUTE} from \"../utils/consts\";\r\nimport {login, registration} from \"../http/userAPI\";\r\nimport {observer} from \"mobx-react-lite\";\r\nimport {Context} from \"../index\";\r\nimport \"../styles/Auth.css\";\r\n\r\n\r\nconst Auth = observer(() => {\r\n    const {user} = useContext(Context)\r\n    const location = useLocation()\r\n    const history = useNavigate()\r\n    const isLogin = location.pathname === LOGIN_ROUTE\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n\r\n    const click = async () => {\r\n        try {\r\n            let data;\r\n            if (isLogin) {\r\n                data = await login(email, password);\r\n            } else {\r\n                data = await registration(email, password);\r\n            }\r\n            console.log(\"Данные после регистрации/входа:\", data);\r\n\r\n            user.setUser(data)\r\n            user.setIsAuth(true)\r\n\r\n            history(SHOP_ROUTE)\r\n            window.location.reload();\r\n        } catch (e) {\r\n            alert(e.response?.data?.message || \"Ошибка авторизации\");\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <Container className=\"auth-container\">\r\n            <Card className=\"auth-card\">\r\n                <h2 className=\"auth-title\">{isLogin ? 'Авторизация' : \"Регистрация\"}</h2>\r\n                <Form className=\"auth-form\">\r\n                    <Form.Control\r\n                        className=\"auth-input\"\r\n                        placeholder=\"Введите ваш email...\"\r\n                        value={email}\r\n                        onChange={e => setEmail(e.target.value)}\r\n                    />\r\n                    <Form.Control\r\n                        className=\"auth-input\"\r\n                        placeholder=\"Введите ваш пароль...\"\r\n                        value={password}\r\n                        onChange={e => setPassword(e.target.value)}\r\n                        type=\"password\"\r\n                    />\r\n                    <Row className=\"auth-buttons\">\r\n                        {isLogin ? (\r\n                            <div>\r\n                                Нет аккаунта? <NavLink className=\"auth-link\" to={REGISTRATION_ROUTE}>Зарегистрируйся!</NavLink>\r\n                            </div>\r\n                        ) : (\r\n                            <div>\r\n                                Есть аккаунт? <NavLink className=\"auth-link\" to={LOGIN_ROUTE}>Войдите!</NavLink>\r\n                            </div>\r\n                        )}\r\n                        <Button className=\"auth-btn\" onClick={click}>\r\n                            {isLogin ? 'Войти' : 'Регистрация'}\r\n                        </Button>\r\n                    </Row>\r\n                </Form>\r\n            </Card>\r\n        </Container>\r\n    );\r\n});\r\n\r\nexport default Auth;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}